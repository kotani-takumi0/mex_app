# MEX App 説明書

このドキュメントは、MEX App を使うための基本的な手順と、MCPトークンの使い方をまとめたものです。
開発環境のセットアップは `README.md` を参照してください。

## 1. アプリ概要
MEX App は「AI支援開発の過程」を記録・可視化するポートフォリオアプリです。
プロジェクト単位で開発ログを残し、公開ポートフォリオとして共有できます。

## 2. 主要画面
| 画面 | パス | できること |
| --- | --- | --- |
| ランディング | `/` | サービス概要を確認 |
| 認証 | `/auth` | ログイン/登録 |
| ダッシュボード | `/dashboard` | 進捗サマリ、最近のプロジェクト |
| 設定 | `/settings` | プロフィール編集、MCPトークン管理 |
| 新規プロジェクト | `/projects/new` | プロジェクト作成 |
| プロジェクト詳細 | `/projects/:id` | 開発ログの閲覧・手動追加 |
| 公開ポートフォリオ | `/p/:username` | 公開プロフィールとプロジェクト一覧 |

## 3. 基本の使い方
1. `/auth` でユーザー登録またはログインします。
2. `/projects/new` でプロジェクトを作成します。
3. `/projects/:id` で開発ログを手動追加します。
4. `/settings` でプロフィールを整え、公開URL（`/p/:username`）を設定します。
5. 公開ページを共有してポートフォリオとして活用します。

## 4. MCPトークンの使い方
### MCPトークンとは
MCPトークンは、MCPサーバーや外部ツールが MEX App のAPIを使うための長寿命トークンです。
通常のWebログイン用JWT（60分）とは別に、MCP向けに約30日有効のトークンを発行します。

### 発行手順
1. `/settings` の「MCPトークン」セクションでトークンを発行します。
2. 発行直後に表示されるトークンを必ずコピーして保存します。
   トークン本体は後から再表示できません。

### MCPサーバーでの利用方法
MCPサーバーは `~/.mex/config.json` の `api_key` にトークンを設定して使います。

`~/.mex/config.json` の例:
```json
{
  "api_url": "http://localhost:8000/api",
  "api_key": "<your_mcp_token>",
  "ai_tool": "claude_code"
}
```

MCPサーバーのセットアップ:
```bash
npx mex-setup
```

Claude Code の MCP 設定（`~/.claude/mcp_servers.json`）に登録:
```json
{
  "mex": {
    "command": "npx",
    "args": ["mex-mcp-server"]
  }
}
```

詳しい手順は `MCP_SERVER.md` を参照してください。

### 無効化・再発行
- `/settings` からトークンを無効化できます。
- 期限切れや漏洩が疑われる場合は無効化し、新しいトークンを発行してください。

### セキュリティ注意点
- MCPトークンは API キーと同じ扱いです。第三者に共有しないでください。
- 公開リポジトリやログに混入しないよう注意してください。

## 5. 補足
- MCPを使わない場合でも、手動で開発ログを追加できます。
- 開発環境のセットアップや起動手順は `README.md` を参照してください。
